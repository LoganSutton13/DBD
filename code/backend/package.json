{
  "name": "drone-imagery-backend",
  "version": "1.0.0",
  "description": "Drone Imagery Processing Backend API",
  "scripts": {
    "help": "echo \"Drone Imagery Backend Development Commands\" && echo \"==============================================\" && echo \"\" && echo \"Available Commands:\" && echo \"\" && echo \"Development Setup:\" && echo \"  npm run setup          Complete development environment setup\" && echo \"  npm run help           Show this help message\" && echo \"\" && echo \"Server Management:\" && echo \"  npm run start          Start FastAPI server\" && echo \"  npm run dev            Start server with auto-reload\" && echo \"\" && echo \"Docker/NodeODM:\" && echo \"  npm run nodeodm:start  Start NodeODM container with GPU\" && echo \"  npm run nodeodm:stop   Stop NodeODM container\" && echo \"  npm run nodeodm:restart Restart NodeODM container\" && echo \"\" && echo \"Testing:\" && echo \"  npm run test           Run API tests (interactive)\" && echo \"  npm run test:small     Run tests with small batch (5 images)\" && echo \"  npm run test:full      Run tests with all images (75+ images)\" && echo \"\" && echo \"Monitoring:\" && echo \"  npm run status         Check status of services\" && echo \"  npm run logs           Show NodeODM container logs\" && echo \"\" && echo \"Cleanup:\" && echo \"  npm run clean          Clean up containers and uploads\" && echo \"\" && echo \"Quick Start Workflow:\" && echo \"  1. npm run setup       (first time only)\" && echo \"  2. npm run nodeodm:start\" && echo \"  3. npm run start\" && echo \"  4. npm run test         (to verify)\" && echo \"\" && echo \"Tips:\" && echo \"  - Run commands from the backend directory\" && echo \"  - Check status with npm run status\" && echo \"  - Use npm run help anytime for this menu\"",
    
    "setup": "node -e \"console.log('Setting up development environment...'); console.log('======================================='); console.log(''); console.log('Installing Python dependencies...');\" && poetry install && node -e \"console.log(''); console.log('Creating .env file...');\" && (if not exist .env (if exist env.example (copy env.example .env && echo [OK] .env file created) else echo [WARN] No env.example found)) else echo [OK] .env file already exists) && node -e \"console.log(''); console.log('Development setup complete!'); console.log('Next steps:'); console.log('  1. Start NodeODM: npm run nodeodm:start'); console.log('  2. Start server: npm run start'); console.log('  3. Run tests: npm run test');\"",
    
    "start": "echo \"Starting FastAPI server...\" && poetry run python run.py",
    "dev": "echo \"Starting FastAPI server with auto-reload...\" && poetry run uvicorn app.main:app --host 0.0.0.0 --port 8001 --reload",
    
    "nodeodm:create": "echo \"Creating NodeODM Docker container...\" && docker run -d -p 3000:3000 --gpus all --name nodeodm-gpu opendronemap/nodeodm:gpu && echo \"[OK] NodeODM container created!\" && echo \"   Web UI: http://localhost:3000\" && echo \"   API: http://localhost:3000/api\" && echo \"   Use 'npm run nodeodm:stop' to stop it\"",
    "nodeodm:start": "echo \"Starting NodeODM Docker container...\" && docker start nodeodm-gpu && echo \"[OK] NodeODM container started!\" && echo \"   Web UI: http://localhost:3000\" && echo \"   API: http://localhost:3000/api\" && echo \"   Use 'npm run nodeodm:stop' to stop it\"",
    
    "nodeodm:stop": "echo \"Stopping NodeODM container...\" && docker stop nodeodm-gpu && echo \"[OK] NodeODM container stopped\"",
    
    "nodeodm:restart": "npm run nodeodm:stop && npm run nodeodm:start",
    
    "test": "echo \"Running API tests...\" && poetry run python tests/test_api.py",
    "test:small": "echo \"Running tests with small batch (5 images)...\" && poetry run python -c \"from tests.test_api import test_upload_small_batch; test_upload_small_batch()\"",
    "test:full": "echo \"Running tests with all images (75+ images)...\" && echo \"[WARN] This will upload all test images and may take a long time!\" && poetry run python -c \"from tests.test_api import test_upload_endpoint; test_upload_endpoint()\"",
    
    "status": "echo \"System Status Check\" && echo \"======================\" && echo \"\" && echo \"Checking API Server (port 8001)...\" && (curl -s http://localhost:8001/health >nul 2>&1 && echo [OK] API Server: Running || echo [ERROR] API Server: Not running) && echo \"\" && echo \"Checking NodeODM (port 3000)...\" && (curl -s http://localhost:3000/api/info >nul 2>&1 && echo [OK] NodeODM: Running || echo [ERROR] NodeODM: Not running) && echo \"\" && echo \"Checking Docker containers...\" && docker ps --filter \"ancestor=opendronemap/nodeodm:gpu\" --format \"table {{.ID}}\t{{.Status}}\t{{.Ports}}\" 2>nul || echo [ERROR] No NodeODM containers running",
    
    "logs": "echo \"NodeODM Container Logs\" && echo \"=========================\" && docker logs nodeodm-gpu --tail 50 2>nul || echo [ERROR] NodeODM container not found or not running",
    
    "clean": "echo \"Cleaning up...\" && docker stop nodeodm-gpu 2>nul && docker rm nodeodm-gpu 2>nul && if exist uploads (rmdir /s /q uploads) && echo \"[OK] Cleanup complete\"",
    
    "quick:start": "npm run nodeodm:start && npm run start",
    "quick:stop": "npm run nodeodm:stop",
    
    "docker:info": "echo \"Docker System Information\" && echo \"=============================\" && docker --version && docker system df && echo \"\" && echo \"GPU Support:\" && docker run --rm --gpus all nvidia/cuda:11.0-base nvidia-smi 2>nul || echo [ERROR] GPU support not available",
    
    "docker:pull": "echo \"Pulling latest NodeODM image...\" && docker pull opendronemap/nodeodm:gpu",
    
    "troubleshoot": "echo \"Troubleshooting Information\" && echo \"=============================\" && echo \"\" && echo \"Python Version:\" && python --version 2>nul || echo [ERROR] Python not found && echo \"\" && echo \"Poetry Version:\" && poetry --version 2>nul || echo [ERROR] Poetry not found && echo \"\" && echo \"Docker Version:\" && docker --version 2>nul || echo [ERROR] Docker not found && echo \"\" && echo \"Port Usage:\" && netstat -an | findstr \":8001 :3000\" 2>nul || echo No services on ports 8001/3000 && echo \"\" && echo \"Common Issues:\" && echo \"  - Port 8001 in use: Change PORT in .env file\" && echo \"  - Port 3000 in use: Stop other NodeODM containers\" && echo \"  - GPU not working: Check NVIDIA drivers and Docker GPU support\" && echo \"  - Poetry not found: Install from https://python-poetry.org\""
  },
  "keywords": [
    "drone",
    "imagery",
    "processing",
    "fastapi",
    "nodeodm",
    "opendronemap"
  ],
  "author": "Drone Imagery Team",
  "license": "MIT",
  "engines": {
    "node": ">=14.0.0"
  }
}
